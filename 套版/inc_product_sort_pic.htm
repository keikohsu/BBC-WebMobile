<style>
    .pic-window-bg .pic-window { width: 333px;}
    .pic-window-button-box > a,
    .admweb-v2-I-Btn{ cursor: pointer;}
    .admweb-v2-sortlist{ padding-top: 72px;}
    .admweb-v2-sortlist .admweb-v2-sortlist-inner{ font-size: 14px; overflow-x: auto; flex-grow: 1; background: var(--pic-color-grey-10); position: relative;color: var(--pic-color-grey-100); min-height: calc(100vh - 60px - 62px);}

    /* 搜尋 */
    .admweb-v2-sortlist .admweb-v2-sortlist-form { background: var(--pic-light-green-5); padding: 10px; padding-bottom: 0; overflow: hidden; margin-bottom: 0; transition: height 0.3s ease-in-out; box-sizing: content-box; }
    .admweb-v2-sortlist .admweb-v2-input-date-content .admweb-v2-DateBox{ width: calc(100% / 2);}
    .admweb-v2-sortlist .admweb-v2-sortlist-form-item{ display: grid; grid-template-columns: 60px 1fr; align-items: center; gap: 5px; }
    .admweb-v2-sortlist .admweb-v2-sortlist-form-item:last-of-type{ grid-column-end: 4; grid-column-start: 1;}
    .admweb-v2-sortlist .admweb-v2-sortlist-form-toggle-btn { width: 100%; border: none; display: block; padding: 6px; cursor: pointer; margin: 0;}
    .admweb-v2-sortlist .admweb-v2-sortlist-form-toggle-btn i {font-size: 20px; vertical-align: bottom;}
    .admweb-v2-sortlist .admweb-v2-sortlist-form-head_search { display: grid; grid-template-columns: auto 1fr 84px; gap: 5px; }
    .admweb-v2-sortlist .admweb-v2-sortlist-form-head_search-btn { padding: 10px; cursor: pointer; border-radius: 8px; }
    .admweb-v2-sortlist .admweb-v2-sortlist-form-btn { border-radius: 8px; display: block; width: 100%; cursor: pointer; }

    @media screen and (min-width: 768px){
        .admweb-v2-sortlist .admweb-v2-sortlist-form-head-search-outer{ display: grid; grid-template-columns: repeat(4,minmax(0,1fr)); gap: 5px;}
        .admweb-v2-sortlist .admweb-v2-sortlist-form-head_search{ grid-area: 1/1/2/5; }
        .admweb-v2-sortlist .admweb-v2-sortlist-form-head_search + div{ grid-area: 2/1/3/5 }
        .admweb-v2-sortlist .admweb-v2-sortlist-form div + div{ margin: 0; }
    }

    .icon-line-Look{ font-size: 24px;}

    /* 清單 */
    .admweb-v2-sortlist .admweb-v2-sortlist-card + .admweb-v2-sortlist-card { margin: 10px 0; }
    .admweb-v2-sortlist .admweb-v2-sortlist-table{ font-size: 14px; text-align: center; width: 100%; display: none; }
    .admweb-v2-sortlist .admweb-v2-sortlist-table-head { color:var(--pic-color-grey-60) }
    .admweb-v2-sortlist .admweb-v2-sortlist-table-head th{ background: var(--pic-color-grey-5); padding:12px 5px; font-weight: normal; }
    .admweb-v2-sortlist .admweb-v2-sortlist-table-head th:first-child{ border-radius: 8px 0px 0px 0px; }
    .admweb-v2-sortlist .admweb-v2-sortlist-table-head th:last-child{ border-radius: 0px 8px 0px 0px; }
    .admweb-v2-sortlist .admweb-v2-sortlist-table-tr{ border-bottom: 1px solid #EAEAEA;}
    .admweb-v2-sortlist .admweb-v2-sortlist-table-tr td{ padding: 8px;}
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr th:first-of-type,
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr td:first-of-type{ width: calc(100% - 490px);}
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr th:nth-child(2),
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr td:nth-child(2){ width: 150px;}
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr th:nth-child(3),
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr td:nth-child(3){ width: 340px;}
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr .admweb-v2-sortlist-name{ overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}
    .admweb-v2-sortlist .admweb-v2-sortlist-table tr .admweb-v2-sortlist-type-text { margin-top: 5px; font-size: 14px; }
    @media screen and (min-width: 768px){
        .admweb-v2-sortlist .admweb-v2-sortlist-table{ display: table; }
        .admweb-v2-sortlist .admweb-v2-sortlist-card-top,
        .admweb-v2-sortlist .admweb-v2-sortlist-card-detail{ display: none; }
    }

    /* tag */
    .admweb-v2-sortlist-tag-sortlist-type{ background:var(--pic-light-red-5); border: 1px solid var(--pic-light-red-20); border-radius: 5px; padding: 5px 6px; color: var(--pic-red); font-size: 12px; display: inline-block;}
    .admweb-v2-sortlist-tag-sortlist-type i.icons-line{ font-size: 16px; font-weight: normal; margin-right: 2px;}
    .admweb-v2-sortlist-tag-status-valid{ background:var(--pic-light-red-5); border: 1px solid var(--pic-light-red-20); border-radius: 5px; padding: 5px 6px; color: var(--pic-red); font-size: 12px; display: inline-block;}
    .admweb-v2-sortlist-tag-status-invalid{ background:var(--pic-color-grey-5); border: 1px solid var(--pic-color-grey-20); border-radius: 5px; padding: 5px 6px; color: var(--pic-color-grey-30); font-size: 12px; display: inline-block;}

    /* 置底按鈕 */
    .pic-confirm-box{ margin: 0;}
    .admweb-v2-sortlist-action { display: flex; justify-content: flex-end; width: calc(100% - 250px); background-color: #fff;padding: 10px 15px; position: fixed; right: 0; bottom: 0; }
    .admweb-v2-sortlist-action i.icons-line { font-weight: normal; font-size: 13px; }
    .admweb-v2-sortlist-action > button { display: flex; justify-content: center; align-items: center; gap: 3px 5px; background: var(--pic-green); color: #fff; padding: 3px 5px; border: none; border-radius: 6px; cursor: pointer;}
    .admweb-v2-sortlist-action-row_btn { flex-direction: row; flex-grow: 1; }
    @media screen and (min-width: 768px){
        .admweb-v2-sortlist-action-row_btn{ flex-direction: row; flex-grow: 0; padding: 10px 12px; }
        .admweb-v2-sortlist-action > button{ font-size: 16px; padding: 10px 12px; }
        .admweb-v2-sortlist-action i.icons-line{ font-size: 16px; }
    }
</style>

<div class="pic-default pic-flex admweb-v2-sortlist">
    <!-- 左側選單 Start -->
    <div class="admweb-v2-seller-front-left-box">
        {{include file="admweb_2/admweb.main_menu.htm"}}
    </div>
    <!-- 左側選單 End -->

    <!-- 右側內容 Start -->
    <div class="admweb-v2-adjustment">
        {{if $m_arrProductSort|@count != 0}}
        <div class="admweb-v2-settings-frame pic-margin-10">
            <div class="admweb-v2-NewProduct-title">
                <h2 class="admweb-v2-SettingsTitle"><i class="icons-line icon-line-paper-text"></i>商品分類列表</h2>
            </div>
            <!-- 清單 -->
            <ul class="admweb-v2-sortlist-list pic-margin-b20">
                <li class="admweb-v2-sortlist-card">
                    <table class="admweb-v2-sortlist-table ">
                        <thead>
                            <tr class="admweb-v2-sortlist-table-head">
                                <th>商品分類名稱</th>
                                <th>狀態</th>
                                <th>編輯</th>
                            </tr>
                        </thead>
                        <tbody>
                        {{section name=i loop=$m_arrProductSort}}
                            <tr class="admweb-v2-sortlist-table-tr">
                                <td><div class="admweb-v2-sortlist-name">{{$m_arrProductSort[i].prod_sort_name}}</div></td>
                                <td>
                            {{if $m_arrProductSort[i].prod_sort_status == 1}}
                                    <span class="admweb-v2-sortlist-tag-status-valid">{{$lang.admin.basic.7}}</span>
                            {{else}}
                                    <span class="admweb-v2-sortlist-tag-status-invalid">{{$lang.admin.basic.8}}</span>
                            {{/if}}
                                </td>
                                <td>
                                    <div class="pic-confirm-box pic-justify-content-flex-end pic-icon-margin-r pic-line-light15">
                                        {{if $m_arrProductSort[i].prod_sort_layer < $sys_arrWebsite.web_prod_sort_layer}}
                                        <a class="admweb-v2-I-Btn pic-BgText-color-green pic-margin-r5" href="admweb.main.php?action=product_sort_pic&prod_sort_p_uid={{$m_arrProductSort[i].prod_sort_uid}}" >
                                            <i class="icons-line icon-line-Look"></i>查看分類</a>
                                        {{/if}}
                                        <a class="admweb-v2-I-Btn pic-BgText-color-green pic-margin-r5" href="admweb.main.php?action=product_sort_edit_pic&prod_sort_uid={{$m_arrProductSort[i].prod_sort_uid}}" ><i class="icons-line icon-line-edit"></i>編輯</a>
                                        <!--<a class="admweb-v2-I-Btn pic-BgText-color-green"><i class="icons-line icon-line-ashbin"></i>刪除</a>-->
                                    </div>
                                </td>
                            </tr>
                        {{/section}}

                        </tbody>
                    </table>
                </li>
            </ul>
        </div>
        {{/if}}
    <!-- 置底按鈕 -->
    <div class="admweb-v2-sortlist-action" id="js-sortlist-action">
        <a class="admweb-v2-order_detail__action-btn" href="admweb.main.php?action=product_sort_edit_pic&prod_sort_p_uid={{$in_prod_sort_p_uid}}"><i class="icons-line iopen-icon-white-add-front"></i>新增商品分類</a>
    </div>
    <!-- 右側內容 End-->
    {{if $m_arrProductSort|@count == 0}}
     <!-- 清單目前無分類資料 -->
     <div class="admweb-v2-NoData">
        <div class="admweb-v2-img-BlacklistNoData"></div>
        <span>目前無分類資料</span>
    </div>
    {{/if}}
    {{if $prod_sort_count>0}}
        <!-- 頁碼 -->
        {{if $m_arrPage.p_num==1 }}
        <!-- 30筆以下 -->
        <div class="pic-text-center page_num">
            <p class="pic-page-bottom-text">1 - {{$prod_sort_count}} 筆／共 {{$prod_sort_count}} 筆</p>
        </div>
        {{else}}
        <div class="pic-flex-center pic-flex-center-column page_num">
            <ul class="admweb-v2-pagination">
                {{if $m_arrPage.p_num >5}}{{$m_arrPage.pager_prev}}{{/if}}
                {{$m_arrPage.pager_numeric}}
                {{if $m_arrPage.p_num >5}}{{$m_arrPage.pager_next}}{{/if}}
            </ul>
            <p class="admweb-v2-page-bottom-text">{{$m_arrPage.row_start+1}} - {{if $m_arrPage.p == $m_arrPage.p_num}}{{$prod_sort_count}}{{else}}{{$m_arrPage.row_start+$m_arrPage.rows_num}}{{/if}} 筆／共 {{$prod_sort_count}} 筆</p>
        </div>
        {{/if}}
    {{/if}}

</div>
</div>

<!-- 視窗 -->
<div id="admweb-v2-window-content" class="pic-window-bg" style="display:none" >
    <div class="pic-window">
        <div class="admweb-v2-window-content">
            <i class="icons-line icon-line-X admweb-v2-WindowClose-position"onclick="WindowClose()"></i>
        <div class="pic-OrderCancel-window-close"></div>
        <h2>分享商品</h2>
        <span class="admweb-v2-window-text">分享商品給你的親朋好友</span>
        <div>
            <a class="pic-window-link admweb-v2-window-ShareLink" href="javascript:void(0);"></a>
            <a class="pic-window-link admweb-v2-window-ShareLine" href="javascript:void(0);"></a>
            <a class="pic-window-link admweb-v2-window-ShareFB" href="javascript:void(0);"></a>
            <a class="pic-window-link admweb-v2-window-ShareIG" href="javascript:void(0);"></a>
        </div>
        </div> 
            <div class="pic-window-button-box">
                <a class="pic-window-button-TwoBtn pic-BgText-color-green pic-window-button-TwoBtn-r" onclick="WindowClose()" value="1">確定</a>
        </div>
    </div>
</div>

<script>
    // 分享lightbox-開啟
    function WindowOpen() {
        $("#admweb-v2-window-content").show()
    }
    // 分享lightbox-關閉
    function WindowClose() {
        $(".pic-window-bg").hide()
    }

    $(function (){
        // 頁籤套件
        var $switch_top = $('.swiper-wrapper .swiper-slide');
        $($switch_top.eq(0).addClass('selected').find('swiper-slide'));
        $switch_top.click(function () {
            $(this).addClass('selected').siblings('.selected').removeClass('selected');
        });
        
        // 呼叫函式
        searchFormCollapse();
    });
    
    // 搜尋函式
    function searchFormCollapse() {
        const toggleBtn = document.getElementById('js-sortlist-form-toggle--btn');
        const formEle = document.getElementsByClassName('js-sortlist-form')[0];
        const formHeadEle = document.getElementsByClassName(
            'js-sortlist-form-head-search'
        )[0];
        const defaultHeight = formHeadEle.clientHeight;
        const headBtn = document.getElementsByClassName(
            'js-sortlist-form-head-search-btn'
        )[0];
        const wholeHeight = formEle.clientHeight;
        formEle.style.height = `${defaultHeight}px`;
        toggleBtn.addEventListener('click', () => {
            //當前為收合
            if (formEle.style.height === `${defaultHeight}px`) {
            formEle.style.height = `${wholeHeight}px`;
            toggleBtn.innerHTML =
                '收合進階條件<i class="icons-line icon-arrow-top-01"></i>';
            formHeadEle.style.gridTemplateColumns = 'auto 3fr';
            headBtn.style.display = 'none';
            } else {
            ///當前為展開
            formEle.style.height = `${defaultHeight}px`;
            toggleBtn.innerHTML =
                '更多進階條件 <i class="icons-line icon-arrow-down-01"></i>';
            formHeadEle.style.gridTemplateColumns = 'auto 1fr 84px';
            headBtn.style.display = 'block';
            }
        });
    }
</script>